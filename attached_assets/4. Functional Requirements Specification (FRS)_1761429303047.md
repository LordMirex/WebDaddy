Functional Requirements Specification (FRS)
System Features

Public Portfolio: A PHP-driven storefront listing all templates, each with an image, name, price, and buttons to view a live demo or “Get This Website.” The demo opens in a modal iframe.

Order Flow: On clicking “Get This Website,” the visitor fills a short form (name, email, phone/WhatsApp, business name, optional affiliate code). Submitting the form creates a pending_order in the database (template + chosen domain + user info) and immediately redirects to a pre-filled WhatsApp chat link (using wa.me).

Admin Dashboard: Secure login area with CRUD interfaces for templates and domains. Features include: assigning domains to templates, marking domains “available” or “in_use,” viewing and updating pending orders, recording customer details and notes, managing affiliate accounts/withdrawals, and exporting CSV reports.

Affiliate Portal: A login area for affiliates. It displays the affiliate’s unique code and referral link, total clicks/sales, commission earned, and pending payouts. Affiliates can update their bank info and submit withdrawal requests via a simple form. No other functionality (no template editing or site content access).

Database Backend: A MySQL database with normalized tables for templates, domains, users (admins and affiliates), pending orders, sales, and withdrawal requests. Key tables include templates, domains, pending_orders, sales, affiliates, and withdrawal_requests (see schema in Architecture).

Email Notifications: The system uses PHPMailer to send transactional emails (order confirmations, credential delivery, affiliate notifications) when triggered by the admin workflow.

Business Rules

Commission Calculation: When an order is finalized (marked paid), if a valid affiliate code was stored, the system automatically calculates 30% of the template’s base price as the affiliate’s commission and adds it to their pending balance. (For example, ₦200,000 sale ⇒ ₦60,000 commission.) Admin pays out manually upon request.

Domain Selection: Only domains marked “available” for that template are shown on the order form. If no domains are available, the domain dropdown is hidden altogether. Once marked sold (in_use), a domain is removed from the public list.

Affiliate Codes: Affiliate referral codes persist via cookies/sessions so returning visitors remain credited. Affiliates have unique codes (admin-generated) that cannot be duplicated. No self-service registration – only admin can create affiliate accounts.

Secure Data Handling: All user inputs are validated and sanitized. Payments are handled manually via WhatsApp chat (no immediate online charge), so no payment gateway rules apply. Admin must verify each sale.

Record Keeping: Every action (orders placed, domains sold, affiliate payouts) is logged. The system keeps audit trails (activity logs) for admin actions and payment confirmations.

Data Flows

Affiliate Tracking: If a visitor lands on a URL with ?aff=CODE, the code is stored in the session and a 30-day cookie. When the order form is submitted, this code is saved in the pending_orders table.

Order to WhatsApp: On form submission, a pending_order record is created (including chosen template, domain, customer info, affiliate code). The system then constructs a WhatsApp link (https://wa.me/<your-number>?text=<order details>) and redirects the user to chat.

Admin Sale Workflow: After the WhatsApp conversation confirms payment, the admin marks the order “paid” in the backend. The chosen domain’s status is updated to “in_use” and linked to the customer. A new sales record is created, and any affiliate commission is calculated. Finally, PHPMailer sends the website login credentials and support info to the customer.

Affiliate Payouts: When an affiliate requests a withdrawal, the request is saved in withdrawal_requests. Upon admin approval, the request is marked paid manually off-system (e.g. bank transfer).

Edge Cases

No Available Domains: If all domains for a template are sold, the order form hides the domain selector (displaying a “sold out” message). Admin can later add more domains.

Invalid Affiliate Code: If a visitor enters a nonexistent or inactive affiliate code, the order proceeds normally with no commission. Admin can manually edit the pending order to add an affiliate code post-factum if needed.

Domain Race Condition: If two customers try to claim the same domain simultaneously, the first processed order will mark it sold. The system should enforce a database constraint so the second attempt fails and prompts the user to choose a different domain.

Payment Not Completed: If a user abandons the WhatsApp chat or never confirms payment, the pending_order remains “pending.” Admin may cancel unfulfilled orders or follow up via WhatsApp.

Form Errors: All form fields are required except affiliate code. Invalid or missing data should prompt user-friendly error messages and prevent submission.

Integrations

WhatsApp Chat: Orders use WhatsApp’s wa.me API to open the chat app with an encoded message. No custom WhatsApp API integration is needed, just properly formatted links.

Email (PHPMailer): The backend uses PHPMailer library to send HTML emails to customers and affiliates. Emails include SMTP configuration via the cPanel environment.

CSV Export: Built-in routines generate CSV files for sales, domains, and affiliate reports; no external tools required.

(Future) Payment Gateways: While MVP uses only manual payments, the system is designed so that a Paystack (or similar) integration could be added later (e.g. to replace WhatsApp redirection).