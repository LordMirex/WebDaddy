Integration Design Document (Document 9)

WhatsApp Integration: The purchase flow ends by redirecting to WhatsApp. We generate a link of the form https://wa.me/<number>?text=<encoded_message> 
directchatnumber.com
. The <number> is the support phone number (international format) stored in a settings table (whatsapp_number column) that the Admin can update. The <encoded_message> includes the customer’s name, template ordered, chosen domain, and any notes. We use rawurlencode() to safely encode spaces and special characters (spaces become %20, etc.)
directchatnumber.com
. Example: wa.me/2348098765432?text=Hello%20Admin,%20I%20have%20chosen%20the%20“E-commerce%20Store”%20template,%20domain:%20mystore.ng. Clicking this link opens the user’s WhatsApp (web or app) with the message ready. If the automatic redirect fails (e.g. on desktop without WhatsApp), we display a fallback: a prompt to message +2348098765432 (the same number) manually.

Email Integration: We use PHPMailer to send transactional emails (via SMTP). In the Admin settings, SMTP details (host, port, username, password) are configured. PHPMailer’s isSMTP() method is enabled; authentication (with TLS) is required. When an order is confirmed, the Admin panel triggers an email template (HTML) to the customer’s email with site login info. PHPMailer’s built-in functionality handles multiple recipients/attachments if needed
github.com
. We also plan email templates (editable in Settings) for order confirmation, affiliate notifications, and any payment reminders. Emails are sent from a no-reply address and include plain-text fallbacks. Error logs capture any mail failures for troubleshooting.

Future Integrations: The design anticipates optional integrations. For example, a payment gateway like Paystack can be plugged in: upon customer completing a Paystack payment, Paystack would POST to our webhook URL confirming success
paystack.com
. We would then automatically mark the order paid, assign the domain, and email the user (bypassing the WhatsApp chat if automated). The document specifies that a Paystack webhook endpoint should verify Paystack’s HMAC signature and update the same pending_orders and sales records. We also note the possibility of adding third-party analytics (for affiliate link clicks) by instrumenting the landing page. Such integrations should use webhooks/events and secure token verification as per vendor docs (e.g. Paystack’s webhook tutorial
paystack.com
).

Error Handling: We build graceful fallbacks. If the WhatsApp link fails (no WhatsApp client), the user sees the support number and can try contacting manually. If PHPMailer fails to send (e.g. SMTP error), the system logs the error and the Admin panel shows an alert; in that case the admin can retry sending emails. Form validation (client- and server-side) prevents bad input. If required fields are missing, the form highlights the issue. All user inputs are sanitized and validated to prevent SQL injection or XSS. For any third-party outage (e.g. Paystack downtime), the system can show a generic “Payment system unavailable, please try again later” message. Thus, we ensure the user or admin always has a clear path forward even when a service is temporarily down.